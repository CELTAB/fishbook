extends base_layout

block scripts
    script(src='/socket.io/socket.io.js')
    script(type='text/javascript').
        var socket = io.connect('http://localhost:8082');

        socket.on('connect', function(data){
            console.log("Connected to Node.js Server");            
            socket.emit('subscribe', {channel:'realtime'});
        });

        socket.on('rfiddata', function (data) {
            $('#tableBody tr:last').remove();
            $('#tableBody').prepend(data.htmlRow);
            
            if($('#tableBody tr:nth-child(2)').attr("class") == "success"){                   
                
            }else{
                $('#tableBody tr:nth-child(1)').addClass("success");
            }
        });

        socket.on('info', function (data) {
            console.log('Info: ', data);            
        });
 

block stylesheets
  link(href="/css/style.css" rel="stylesheet")

block append content
  div.container.highlight
    div.row.starter-template
    div(class="col-md-12")
        table(id="rfidtable" class="table")
            thead
                tr
                    th Institution
                    th Collector
                    th Species
                    th Antena ID
                    th PIT TAG
                    th Date & Time
            tbody(id="tableBody")
                -var jsonArray = JSON.parse(rfiddata_list)
                -var odd = 0
                for rfiddata in jsonArray
                    if odd == 0
                        -odd = 1
                        tr(class="success") 
                            td= rfiddata.institution_name
                            td= rfiddata.collector_name
                            td= rfiddata.species_name
                            td= rfiddata.idantena
                            td= rfiddata.identificationcode
                            td= (new Date(rfiddata.datetime)).toISOString().replace(/T/, ' ').replace(/\..+/, '')
                    else
                        -odd = 0
                        tr
                            td= rfiddata.institution_name
                            td= rfiddata.collector_name
                            td= rfiddata.species_name
                            td= rfiddata.idantena
                            td= rfiddata.identificationcode
                            td= (new Date(rfiddata.datetime)).toISOString().replace(/T/, ' ').replace(/\..+/, '')

                       